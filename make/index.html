---
layout: none
title: Make
---
<!DOCTYPE html>
<html lang="en">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Make Custom Fundraiser Link for {{ site.scout_type }} {{ site.unit_type }} {{ site.unit_number }}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <style>
    @media print {
      body * {
        visibility: hidden !important;
        position: absolute !important;
        left: -9999px !important;
      }
      #flyerSection, #flyerSection * {
        visibility: visible !important;
        position: static !important;
        left: auto !important;
      }
      #flyerSection .button {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <section class="section">
    <div class="container">
      <div class="box">
        <h1 class="title is-3 has-text-centered">Generate Your Full Fundraiser Link & QR Code for {{ site.unit_type }} {{ site.unit_number }}</h1>
        <form id="linkForm">
          <div class="field">
            <label class="label" for="scout">Scout Name <span class="has-text-danger">(required)</span>:</label>
            <div class="control">
              <input class="input" type="text" id="scout" name="scout" required>
            </div>
          </div>
          <div class="field">
            <label class="label" for="popcorn">Popcorn Scout Code <span class="has-text-grey">(optional)</span>:</label>
            <div class="control">
              <input class="input" type="text" id="popcorn" name="popcorn">
            </div>
            <div id="popcornPreview" style="display:none; margin-top:0.5em;">
              <span class="has-text-grey">Test Popcorn Link:</span>
              <a id="popcornLinkPreview" class="has-text-link" href="#" target="_blank"></a>
            </div>
          </div>
          <div class="field">
            <div class="control">
              <button class="button is-link" type="submit" id="generateBtn">Generate Coffee Fundraiser Link &amp; QR Code</button>
            </div>
          </div>
        </form>
        <div id="result" style="margin-top:2em;"></div>
      </div>
      <!-- Print Flyer Section -->
      <div id="flyerSection" style="display:none; margin-top:2em;">
        <div class="box" style="max-width:500px; margin:auto;">
          <h2 class="title is-4 has-text-centered">Printable Flyer</h2>
          <p class="has-text-centered">Support <span id="flyerScout"></span> in our fundraiser!</p>
          <div class="has-text-centered" style="margin-bottom:1em;">
            <canvas id="flyerQR" style="margin:auto;"></canvas>
          </div>
          <p class="has-text-centered">Scan the QR code or visit:</p>
          <p class="has-text-centered"><a id="flyerLink" class="has-text-link" href="#" target="_blank"></a></p>
        </div>
        <div class="has-text-centered" style="margin-top:1em;">
          <button class="button is-primary" onclick="window.print()">Print Flyer</button>
        </div>
      </div>
    </div>
  </section>
  <script src="https://cdn.jsdelivr.net/npm/qrious/dist/qrious.min.js"></script>
  <script>
    // Popcorn code preview popover and button text/color change
    document.getElementById('popcorn').addEventListener('input', function() {
      const code = this.value.trim();
      const previewDiv = document.getElementById('popcornPreview');
      const previewLink = document.getElementById('popcornLinkPreview');
      const btn = document.getElementById('generateBtn');
      if (code) {
        previewDiv.style.display = '';
        previewLink.href = `{{site.popcorn_base_link}}${encodeURIComponent(code)}`;
        previewLink.textContent = previewLink.href;
        btn.textContent = 'Generate Coffee & Popcorn Link & QR Code';
        btn.classList.remove('is-link');
        btn.classList.add('is-warning');
      } else {
        previewDiv.style.display = 'none';
        previewLink.href = '#';
        previewLink.textContent = '';
        btn.textContent = 'Generate Coffee Fundraiser Link & QR Code';
        btn.classList.remove('is-warning');
        btn.classList.add('is-link');
      }
    });


    document.getElementById('linkForm').onsubmit = function(e) {
      e.preventDefault();
      
      // Encode scout name, replacing spaces with +
      let scout = document.getElementById('scout').value.trim();
      scout = encodeURIComponent(scout).replace(/%20/g, '+');
      let popcorn = document.getElementById('popcorn').value.trim();
      popcorn = encodeURIComponent(popcorn).replace(/%20/g, '+');
      if (!scout) {
        alert('Scout name is required.');
        return;
      }
      let url;
      if (popcorn) {
        url = `${window.location.origin}/sell/?scout=${scout}&popcorn=${popcorn}`;
      } else {
        url = `${window.location.origin}/coffee/?scout=${scout}`;
      }
      document.getElementById('result').innerHTML = `<p>Share this link:</p><a class='has-text-link' href="${url}" target="_blank">${url}</a><br><canvas id='qr'></canvas>`;
  const qr = new QRious({element: document.getElementById('qr'), value: url, size: 200});
  // Show flyer section and populate it
  const flyerSection = document.getElementById('flyerSection');
  flyerSection.style.display = '';
  document.getElementById('flyerScout').textContent = document.getElementById('scout').value.trim();
  document.getElementById('flyerLink').href = url;
  document.getElementById('flyerLink').textContent = url;
  // Generate QR for flyer
  new QRious({element: document.getElementById('flyerQR'), value: url, size: 200});
    };
  </script>
</body>
</html>
